<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.EmployeeDao">
    <select id="getEmpByDepId" resultType="pojo.Employee">
        SELECT * FROM t_employee WHERE departmentid=#{departmentid}
    </select>
    <!--3.动态sql if where -->
    <!--List<Employee>  getEmpByIdDynamic(Employee employee);-->
    <select id="getEmpByIdDynamic" resultMap="MyEmp">
        select * from t_employee

          <trim prefixOverrides="and" suffixOverrides="and">
          <!-- 后面多出的and或者or where标签不能解决
           prefix="":前缀： prefix给拼串后的整个字符串加一个前缀 。
           prefixOverrides="":前缀覆盖： 去掉整个字符串前面多余的字符
           suffix="":后缀     suffix给拼串后的整个字符串加一个后缀
           suffixOverrides=""后缀覆盖：去掉整个字符串后面多余的字符
           -->
              <where>
                  <if test="id!=null">
                      and id > #{id}
                  </if>
                  <if test="lastName!=null &amp;&amp; lastName!=&quot;&quot;">
                      and lastname like #{lastName} and
                  </if>
              </where>
          </trim>

    </select>
    <resultMap type="pojo.Employee" id="MyEmp">
        <id column="id" property="id"/>
        <result column="lastName" property="lastName"/>
        <result column="email" property="email"/>
        <result column="gender" property="gender"/>
        <result column="birth" property="birth"/>
        <result column="login_account" property="loginAccount"/>
        <association property="department"
                     javaType="pojo.Department"
                     select="dao.DepartmentDao.getDepById"
                     column="departmentid"
                     fetchType="lazy">
        </association>
    </resultMap>



</mapper>

